@model IEnumerable<BusinessLayer.MdlClasses.MdlPartner>
@{
    ViewBag.Title = "Share Setting";
    Layout = "~/Views/Shared/_FirmLayout.cshtml";
}

@section Header{
    @Html.Partial("~/Views/Shared/PartialViews/_Header.cshtml")
}

@section Sidebar{
    @Html.Partial("~/Views/Shared/PartialViews/_SideBar.cshtml")
}


@section BodyContent{
    <ol class="breadcrumb">
        <li><a href="/Firm"><i class="fa fa-dashboard"></i>Home</a></li>
        <li class="active">New Name And Address Form D</li>
    </ol>
   
    <p>
       
    </p>
    <table id="example1" class="table table-responsive table-striped table-bordered">
        <thead>
            <tr>

                <th>
                    Name

                </th>
                <th>
                    Cnic

                </th>


                <th>
                    Address

                </th>
                <th>
                    Contact #

                </th>
                <th>
                    Mobile No

                </th>

                <th>
                    OrgDoc_ID

                </th>

                <th>
                    Share
                </th>


                <th>
                    IsActive

                </th>

                <th>
                    Action
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>

                    <td>
                        @Html.DisplayFor(modelItem => item.PartnerName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.PartnerCNIC)
                    </td>


                    <td>
                        @Html.DisplayFor(modelItem => item.PartnerAddress)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.PartnerContactNo)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.PartnerMobileNo)
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.OrgDoc_ID)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.PartnerShare)
                    </td>
                    <td>

                        <input type="checkbox" readonly="readonly" checked='@item.IsActive' />
                    </td>


                    <td>


                        <button type="button" id="changeshare" style="padding: 0px 5px !important;" class="btn k-button" onclick=NAModel('@item.PartnerName','@item.PartnerID','@item.PartnerAddress')>Set AddressName</button>

                        

                    </td>
                </tr>
            }
        </tbody>

    </table>
    <input type="button" id="Complete" value="Complete" class="btn btn-danger" />
    <div class="modal fade" id="Close_ProjectModal" role="dialog" tabindex="-1" aria-labelledby="purchaseLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog" style="width: 40%; margin-top: 9% !important;">

            <div class="modal-content">
                <div class="modal-header" style="background-color:#363940;height:38px;padding:0px">
                    <h4 class="modal-title" style="text-align:center; color:white">Confirmation</h4>
                </div>
                <div class="modal-body">
                    <b>Are you sure to save partner information and end the process?</b>
                </div>
                <div class="modal-footer" style="height:48px;padding:6px 23px 0 0">
                    <button type="button" id="btnConform" style="height:35px;width:80px;font-size:12px" class="k-button hide-on-narrow">Yes</button>
                    <button type="button" id="btnCancalConform" data-dismiss="modal" style="height:35px;width:80px;font-size:12px" class="btn btn-danger">No</button>
                </div>
            </div>
        </div>

    </div>
    <div class="modal fade" id="Close_ProjectModal1" role="dialog" tabindex="-1" aria-labelledby="purchaseLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog" style="width: 40%; margin-top: 9% !important;">

            <div class="modal-content">
                <div class="modal-header" style="background-color:#363940;height:38px;padding:0px">
                    <h4 class="modal-title" style="text-align:center; color:white">New Address & Name </h4>
                </div>
                <div class="modal-body">

                    <label class="control-label ">Name</label>
                    <div>
                        <input type="text" id="PartnerName" name="PartnerName" maxlength="6" class="form-control" />

                    </div>


                    <label class="control-label">Address</label>
                    <div>

                        <input type="text" id="PartnerAddress" name="PartnerAddress" class="form-control" />


                    </div>
                </div>
                <div class="modal-footer" style="height:48px;padding:6px 23px 0 0">
                    <button type="button" id="btnConform1" style="height:35px;width:80px;font-size:12px" class="k-button hide-on-narrow">Save</button>
                    <button type="button" id="btnCancalConform1" style="height:35px;width:80px;font-size:12px" class="btn btn-danger">Cancel</button>
                </div>
            </div>
        </div>

    </div>

    <div class="modal fade" id="Close_ProjectModal2" role="dialog" tabindex="-1" aria-labelledby="purchaseLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog" style="width: 40%; margin-top: 9% !important;">

            <div class="modal-content">
                <div class="modal-header" style="background-color:#363940;height:38px;padding:0px">
                    <h4 class="modal-title" style="text-align:center; color:white">New Form H Issue  </h4>
                </div>
                <div class="modal-body">
               

                    <label class="control-label ">New Form H Issue No</label>
                    <div>
                        <input type="text" id="NewFormHIssueNo" name="NewFormHIssueNo" maxlength="6" class="form-control" />

                    </div>


                    <label class="control-label">New Form H Issue Date</label>
                    <div>

                        <input type="date" id="NewFormHIssueDate" name="NewFormHIssueDate" class="form-control" />


                    </div>
                </div>
                <div class="modal-footer" style="height:48px;padding:6px 23px 0 0">
                    <button type="button" id="btnConform2" style="height:35px;width:80px;font-size:12px" class="k-button hide-on-narrow">Save</button>
                    <button type="button" id="btnCancalConform2" style="height:35px;width:80px;font-size:12px" class="btn btn-danger">Cancel</button>
                </div>
            </div>
        </div>

    </div>

    <script type="text/javascript">
        $('#Complete').click(function () {
            $('#Close_ProjectModal2').modal("show");

            $('#btnConform2').click(function () {

                $("#NewFormHIssueNo").removeClass("errorClass");
                $("#NewFormHIssueDate").removeClass("errorClass");

                if ($.trim($("#NewFormHIssueNo").val()) == "") {
                    $("#NewFormHIssueNo").addClass('errorClass');
                    return false
                }
                if ($.trim($("#NewFormHIssueDate").val()) == "") {
                    $("#NewFormHIssueDate").addClass('errorClass');
                    return false
                }
                var NewFormHIssueNo = $.trim($("#NewFormHIssueNo").val());
                var NewFormHIssueDate=$.trim($("#NewFormHIssueDate").val());
                $.ajax({
                    url: '/Partner/NewFormHIssue',
                    type: 'POST',
                    data: { NewFormHIssueNo: NewFormHIssueNo, NewFormHIssueDate: NewFormHIssueDate },
                    success: function (data) {
                        toastr.success(data.message);
                        $('#Close_ProjectModal2').modal("hide");
                       location.href = "Partner/Index";
                      //  location.reload();

                    },
                    error: function (data) {
                        $('#Close_ProjectModal2').modal("show");
                        toastr.error(data.message);

                    }
                });


                //alert("yes");
            });
            $('#btnCancalConform2').click(function () {
                //alert("No");
                $('#Close_ProjectModal2').modal("hide");


            });
        });


        function NAModel(PartnerName, GoverningBodyID, Address) {
            
         $('#Close_ProjectModal1').modal("show");
         var PartnerID = GoverningBodyID;
       //  var PartnerShare = Share;


         $('#PartnerName').val(PartnerName);
         $('#PartnerAddress').val(Address);


         $('#btnConform1').click(function () {
             var PartnerName = $('#PartnerName').val();
             var PartnerAddress = $('#PartnerAddress').val();
             $.ajax({
                 url: '/Partner/SetNameandAddressFormD',
                 type: 'POST',
                 data: { PartnerID: PartnerID, PartnerAddress: PartnerAddress, PartnerName: PartnerName },
                 success: function (data) {
                     toastr.success(data.message);
                     $('#Close_ProjectModal1').modal("hide");

                     location.reload();

                 },
                 error: function (data) {
                     $('#Close_ProjectModal1').modal("show");
                     toastr.error(data.message);

                 }
             });
             return false;
         });
         $('#btnCancalConform1').click(function () {
             $('#PartnerId').val('');
             $('#Share').val('');
             $('#Close_ProjectModal1').modal("hide");


         });
     }


     //$('#btnCancalConform').click(function () {
     //    $('#Close_ProjectModal').modal("hide")
     //    $('#myModal').modal("show");
     //});

     //$('#UndoDeActivePartner').click(function () {
     //    var OrgDoc_ID = $('#OrgDoc_ID').val();

     //    // alert(OrgDoc_ID);
     //    $.ajax({
     //        url: '/Firm/UndoDeActivePartner',
     //        type: 'POST',
     //        data: { ID: OrgDoc_ID },
     //        success: function (data) {
     //            location.reload();
     //            toastr.success(data.message);

     //            // alert(data.name);
     //        },
     //        error: function (data) {

     //            toastr.error(data.message);
     //            //  alert("error");
     //        }
     //    });
     //    return false;

     //});

     //$('#btnConform').click(function () {

     //    //$('#myModal').modal({ show: true });
     //    //$('#Close_ProjectModal').modal({ hide: true });
     //    //$("#issueCancel").trigger("click");
     //    var OrgDoc_ID = $('#OrgDoc_ID option:selected').val();
     //    // alert(OrgDoc_ID);

     //    $.ajax({
     //        url: '/Firm/DeactivatePartner',
     //        type: 'POST',
     //        data: { ID: OrgDoc_ID },
     //        success: function (data) {
     //            $('#Close_ProjectModal').modal("hide");
     //            toastr.success(data.message);
     //            location.reload();
     //            // alert(data.name);
     //        },
     //        error: function (data) {
     //            $('#myModal').modal("show");
     //            toastr.error(data.message);
     //            //  alert("error");
     //        }
     //    });
     //    return false;


     //});


     //$("#DeActivePartner").click(function () {

     //    //  $('#myModal').modal({ show: true });
     //    $.ajax({
     //        url: '/Firm/DeactivatePartner',
     //        type: 'GET',
     //        success: function (data) {
     //            $('#myModal').modal({ show: true });
     //            $("#ModelContentArea").html("").append(data);
     //        },
     //        error: function () {
     //            //  toastr.error(data.message);
     //        }
     //    });
     //});
    </script>

}

@section FooterArea{
    @Html.Partial("~/Views/Shared/PartialViews/_Footer.cshtml")


}
